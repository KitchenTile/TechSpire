import { useContext, useState } from "react";
import "./ProfilePannel.css";
import GenreSelectionCompoenet from "./GenreSelectionCompoenet";

const ProfilePannel = ({ mobile = false }) => {
  const [expanded, setExpanded] = useState(false);

  const handleLogout = () => {
    localStorage.removeItem("JWToken");
    window.location.reload();
  };

  return (
    <div
      className={`profile-container ${expanded ? "expanded" : ""} ${
        mobile ? "mobile" : ""
      }`}
    >
      {expanded ? (
        <>
          <div className="close-bttn" onClick={() => setExpanded(false)}></div>
          <div className="title-logout">
            <h2>Settings</h2>
            <div
              className="icon-container"
              id="logOut"
              onClick={() => handleLogout()}
            >
              <svg
                width="33"
                height="33"
                viewBox="0 0 33 33"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M15.334 27C15.334 26.2637 15.9309 25.6667 16.6673 25.6667L20.934 25.6667C22.0761 25.6667 22.8525 25.6657 23.4526 25.6166C24.0372 25.5689 24.3361 25.4823 24.5446 25.3761C25.0464 25.1204 25.4543 24.7124 25.71 24.2107C25.8163 24.0021 25.9028 23.7032 25.9506 23.1187C25.9996 22.5185 26.0007 21.7421 26.0007 20.6L26.0007 12.0667C26.0007 10.9246 25.9996 10.1482 25.9506 9.54809C25.9028 8.96354 25.8163 8.6646 25.71 8.45607C25.4543 7.9543 25.0464 7.54635 24.5446 7.29069C24.3361 7.18444 24.0372 7.09787 23.4526 7.05011C22.8525 7.00108 22.0761 7.00004 20.934 7.00004L16.6673 7.00004C15.9309 7.00004 15.334 6.40309 15.334 5.66671C15.334 4.93033 15.9309 4.33337 16.6673 4.33337L20.9891 4.33337C22.0624 4.33336 22.9482 4.33334 23.6698 4.3923C24.4192 4.45353 25.1082 4.58495 25.7553 4.91467C26.7588 5.426 27.5747 6.24189 28.086 7.24542C28.4157 7.89254 28.5472 8.58148 28.6084 9.33094C28.6673 10.0525 28.6673 10.9384 28.6673 12.0117V20.6551C28.6673 21.7284 28.6673 22.6142 28.6084 23.3358C28.5472 24.0853 28.4157 24.7742 28.086 25.4213C27.5747 26.4249 26.7588 27.2408 25.7553 27.7521C25.1082 28.0818 24.4192 28.2132 23.6698 28.2745C22.9482 28.3334 22.0623 28.3334 20.9891 28.3334H16.6673C15.9309 28.3334 15.334 27.7364 15.334 27Z"
                  fill="#212529"
                />
                <path
                  d="M6.00033 17.6667C5.26395 17.6667 4.66699 17.0697 4.66699 16.3333C4.66699 15.597 5.26395 15 6.00033 15H17.448L15.7242 13.2761C15.2035 12.7554 15.2035 11.9112 15.7242 11.3905C16.2449 10.8698 17.0891 10.8698 17.6098 11.3905L21.6098 15.3905C22.1305 15.9112 22.1305 16.7554 21.6098 17.2761L17.6098 21.2761C17.0891 21.7968 16.2449 21.7968 15.7242 21.2761C15.2035 20.7554 15.2035 19.9112 15.7242 19.3905L17.448 17.6667H6.00033Z"
                  fill="#212529"
                />
              </svg>
            </div>
          </div>
          <h3>Edit genre preferences</h3>
          <p>
            If you want to explore other genres or changed your mind on what
            your favorites are, you can edit them here!
          </p>
          <GenreSelectionCompoenet />
        </>
      ) : mobile ? (
        <span onClick={() => setExpanded(true)}>Settings</span>
      ) : (
        <div className="icon-container" onClick={() => setExpanded(true)}>
          <svg
            width="33"
            height="32"
            viewBox="0 0 33 32"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M25.3916 5.33334C26.128 5.33334 26.7249 5.9303 26.7249 6.66668V9.33334C26.7249 10.0697 26.128 10.6667 25.3916 10.6667C24.6552 10.6667 24.0583 10.0697 24.0583 9.33334V6.66668C24.0583 5.9303 24.6552 5.33334 25.3916 5.33334Z"
              fill="#212529"
            />
            <path
              d="M17.3916 22.6667C17.3916 21.9303 16.7947 21.3333 16.0583 21.3333C15.3219 21.3333 14.7249 21.9303 14.7249 22.6667V25.3333C14.7249 26.0697 15.3219 26.6667 16.0583 26.6667C16.7946 26.6667 17.3916 26.0697 17.3916 25.3333L17.3916 22.6667Z"
              fill="#212529"
            />
            <path
              d="M16.0583 5.33334C16.7946 5.33334 17.3916 5.9303 17.3916 6.66668V17.3333C17.3916 18.0697 16.7946 18.6667 16.0583 18.6667C15.3219 18.6667 14.7249 18.0697 14.7249 17.3333V6.66668C14.7249 5.9303 15.3219 5.33334 16.0583 5.33334Z"
              fill="#212529"
            />
            <path
              d="M8.05827 6.66668C8.05827 5.9303 7.46132 5.33334 6.72494 5.33334C5.98856 5.33334 5.3916 5.9303 5.3916 6.66668L5.3916 12C5.3916 12.7364 5.98856 13.3333 6.72494 13.3333C7.46132 13.3333 8.05827 12.7364 8.05827 12L8.05827 6.66668Z"
              fill="#212529"
            />
            <path
              d="M8.05827 17.3333C8.05827 16.597 7.46132 16 6.72494 16C5.98856 16 5.3916 16.597 5.3916 17.3333L5.3916 25.3333C5.3916 26.0697 5.98856 26.6667 6.72493 26.6667C7.46132 26.6667 8.05827 26.0697 8.05827 25.3333L8.05827 17.3333Z"
              fill="#212529"
            />
            <path
              d="M26.7249 14.6667C26.7249 13.9303 26.128 13.3333 25.3916 13.3333C24.6552 13.3333 24.0583 13.9303 24.0583 14.6667V25.3333C24.0583 26.0697 24.6552 26.6667 25.3916 26.6667C26.128 26.6667 26.7249 26.0697 26.7249 25.3333V14.6667Z"
              fill="#212529"
            />
            <path
              d="M25.3923 16C23.1831 16 21.3923 14.2091 21.3923 12C21.3923 9.79086 23.1831 8 25.3923 8C27.6014 8 29.3923 9.79086 29.3923 12C29.3923 14.2091 27.6014 16 25.3923 16ZM25.3923 13.3333C24.6559 13.3333 24.0589 12.7364 24.0589 12C24.0589 11.2636 24.6559 10.6667 25.3923 10.6667C26.1286 10.6667 26.7256 11.2636 26.7256 12C26.7256 12.7364 26.1286 13.3333 25.3923 13.3333Z"
              fill="#212529"
            />
            <path
              d="M12.0589 20C12.0589 22.2091 13.8498 24 16.0589 24C18.2681 24 20.0589 22.2091 20.0589 20C20.0589 17.7909 18.2681 16 16.0589 16C13.8498 16 12.0589 17.7909 12.0589 20ZM14.7256 20C14.7256 20.7364 15.3225 21.3333 16.0589 21.3333C16.7953 21.3333 17.3923 20.7364 17.3923 20C17.3923 19.2636 16.7953 18.6667 16.0589 18.6667C15.3225 18.6667 14.7256 19.2636 14.7256 20Z"
              fill="#212529"
            />
            <path
              d="M2.72559 14.6667C2.72559 16.8758 4.51645 18.6667 6.72559 18.6667C8.93473 18.6667 10.7256 16.8758 10.7256 14.6667C10.7256 12.4575 8.93473 10.6667 6.72559 10.6667C4.51645 10.6667 2.72559 12.4575 2.72559 14.6667ZM5.39225 14.6667C5.39225 15.403 5.98921 16 6.72559 16C7.46196 16 8.05892 15.403 8.05892 14.6667C8.05892 13.9303 7.46196 13.3333 6.72559 13.3333C5.98921 13.3333 5.39225 13.9303 5.39225 14.6667Z"
              fill="#212529"
            />
          </svg>
        </div>
      )}
    </div>
  );
};

export default ProfilePannel;
