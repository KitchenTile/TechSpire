import Navigation from "./Navigation";
import Search from "./Search";
import "./Header.css";
import { Link } from "react-router-dom";
import { useEffect, useState, useCallback } from "react";
import MyShowsComponent from "../showScheduler/myShowsComponent";

const Header = ({ isVisible = true }) => {
  const [scrollPosition, setScrollPosition] = useState(0);

  const handleScroll = useCallback(() => {
    requestAnimationFrame(() => {
      const position = window.scrollY;
      setScrollPosition((prev) => (prev !== position ? position : prev));
    });
  }, []);

  useEffect(() => {
    window.addEventListener("scroll", handleScroll, { passive: true });

    return () => {
      window.removeEventListener("scroll", handleScroll);
    };
  }, [handleScroll]);

  return (
    <ul className={`header-container ${isVisible ? "active" : ""}`}>
      <Link to={"/main"} className="header-img-container">
        <li className="header-img-container">
          <svg
            width="945"
            height="963"
            viewBox="0 0 945 963"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            className="logo"
          >
            <path
              d="M775.745 787.148L634.789 681.098C623.11 672.31 610.036 669.909 605.582 675.73C601.129 681.55 606.982 693.39 618.662 702.177L759.617 808.227C771.297 817.014 784.371 819.416 788.824 813.595C793.278 807.774 787.424 795.935 775.745 787.148Z"
              fill="black"
            />
            <path
              d="M836.916 283.97L454.125 285L546.041 117.581C556.622 115.994 564.838 106.848 564.921 95.8279C565.012 83.7169 555.256 73.8918 543.172 73.9243C531.087 73.9568 521.183 83.8348 521.091 95.9458C521.067 99.2016 521.773 102.281 523.027 105.059L424.193 285.081L369.706 285.227L273.574 105.73C274.869 102.946 275.622 99.8619 275.646 96.6062C275.737 84.4952 265.982 74.6701 253.897 74.7026C241.812 74.7351 231.908 84.6131 231.817 96.7241C231.734 107.744 239.814 116.845 250.372 118.376L339.774 285.308L135.644 285.857C109.059 285.929 87.2683 307.661 87.0677 334.305L83.3635 826.266C83.1629 852.91 104.627 874.526 131.212 874.454L832.484 872.567C859.068 872.496 880.86 850.763 881.06 824.12L884.765 332.158C884.965 305.515 863.499 283.899 836.916 283.97ZM854.763 824.191C854.671 836.302 844.767 846.18 832.683 846.212L131.411 848.099C119.326 848.132 109.57 838.307 109.661 826.195L113.365 334.234C113.457 322.123 123.361 312.245 135.446 312.212L361.66 311.604C361.672 311.604 361.686 311.605 361.699 311.605C361.713 311.605 361.727 311.603 361.741 311.603L431.759 311.415C431.773 311.415 431.787 311.417 431.801 311.417C431.814 311.417 431.828 311.415 431.84 311.415L836.717 310.326C848.802 310.293 858.558 320.118 858.467 332.229L854.763 824.191Z"
              fill="black"
            />
            <path
              d="M698.264 400.223C651.888 371.351 562.511 354.281 459.182 354.559C355.853 354.837 266.216 372.389 219.401 401.511C184.031 423.512 160.921 476.119 155.993 545.84C150.837 618.807 167.255 714.297 215.486 751.527C265.605 790.212 372.485 803.756 455.8 803.532C539.115 803.308 646.203 789.188 696.905 750.231C715.957 735.595 731.314 711.51 742.555 678.648C744.96 671.614 740.054 664.349 731.597 662.421C723.126 660.491 714.332 664.631 711.927 671.665C702.459 699.35 689.823 719.846 675.385 730.936C639.209 758.73 553.095 776.861 455.999 777.122C358.902 777.383 273.058 759.716 237.298 732.115C203.462 705.997 182.175 626.475 187.783 547.136C192.091 486.164 210.997 439.602 238.352 422.584C279.205 397.172 363.747 381.226 458.983 380.969C554.22 380.713 638.525 396.205 678.995 421.399C717.635 445.452 737.441 533.028 724.086 620.77C722.983 628.015 729.159 634.573 737.886 635.419C746.592 636.251 754.574 631.078 755.677 623.833C768.26 541.181 755.658 435.95 698.264 400.223Z"
              fill="black"
            />
          </svg>
          <span id="title">VIEW Q</span>
        </li>
      </Link>

      <Navigation />
      <Search />
      <MyShowsComponent position={"vertical"} />
    </ul>
  );
};

export default Header;
